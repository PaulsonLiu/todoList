# Todo List

## 1. 创建Supabase项目

1. 访问 [Supabase Dashboard](https://supabase.com/dashboard)
2. 点击 "New Project"
3. 输入项目名称，选择数据库密码，选择地区
4. 点击 "Create Project"，等待数据库初始化完成

## 2. 创建Todos表

1. 在项目控制台中，点击左侧菜单的 "SQL Editor"
2. 复制粘贴以下SQL脚本到编辑器中：

```sql
create table todos (
  id bigint generated by default as identity primary key,
  user_id uuid references auth.users not null,
  task text check (char_length(task) > 3),
  is_complete boolean default false,
  inserted_at timestamp with time zone default timezone('utc'::text, now()) not null
);

alter table todos enable row level security;

create policy "Individuals can create todos." on todos for
    insert with check ((select auth.uid()) = user_id);

create policy "Individuals can view their own todos. " on todos for
    select using ((select auth.uid()) = user_id);

create policy "Individuals can update their own todos." on todos for
    update using ((select auth.uid()) = user_id);

create policy "Individuals can delete their own todos." on todos for
    delete using ((select auth.uid()) = user_id);
```

3. 点击 "Run" 按钮执行SQL脚本

## 3. 获取API接口地址

1. 在项目控制台中，点击左侧菜单的 "Settings"
2. 点击 "API" 标签
3. 找到 "Project URL"，格式为：`https://[project-ref].supabase.co`
4. todos表的API接口地址为：`https://[project-ref].supabase.co/rest/v1/todos`

## 4. 获取API密钥

1. 在同一API页面中，找到 "Project API keys"
2. 使用 "anon public" 密钥作为客户端API密钥（用于前端应用）
3. **注意**："service_role" 密钥具有完全访问权限，仅用于服务器端环境

## 5. API使用示例

### 获取所有todos
```bash
curl "https://[project-ref].supabase.co/rest/v1/todos"
  -H "apikey: YOUR_ANON_KEY"
  -H "Authorization: Bearer YOUR_ANON_KEY"
```

### 创建新todo
```bash
curl -X POST "https://[project-ref].supabase.co/rest/v1/todos"
  -H "apikey: YOUR_ANON_KEY"
  -H "Authorization: Bearer YOUR_ANON_KEY"
  -H "Content-Type: application/json"
  -d '{"task": "Learn Supabase", "is_complete": false}'
```

## 6. 前端集成

使用Supabase JavaScript客户端库：

```bash
npm install @supabase/supabase-js
```

初始化客户端：

```javascript
import { createClient } from '@supabase/supabase-js'

const supabaseUrl = 'https://[project-ref].supabase.co'
const supabaseKey = 'YOUR_ANON_KEY'
const supabase = createClient(supabaseUrl, supabaseKey)
```

获取todos：

```javascript
async function getTodos() {
  const { data, error } = await supabase
    .from('todos')
    .select('*')
  
  if (error) throw error
  return data
}
```
